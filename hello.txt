
def FAILED_STAGE
pipeline{
  agent any
  stages {
    stage('Cloning Git') {
      steps {
          script {
                    FAILED_STAGE=env.STAGE_NAME
                    echo "Cloning Git"
                }
        git branch:'master', url:'https://github.com/chakri1998/fulldemo.git'
        
      }
      
    }
    def project_path="company"
 
 dir(project_path) {
         stage('Clean Old Packages') {
             
             steps{
                 script {
                    FAILED_STAGE=env.STAGE_NAME
                    echo "Clean Old Packages"
                }
                          
        sh label: 'Clean', script: 'mvn clean'
        
    
             }
         }
        stage('Maven Compile') {
        steps{
            script {
                    FAILED_STAGE=env.STAGE_NAME
                    echo "Maven Compile"
                }
         
        sh label: 'Compile', script: 'mvn compile'
        
    
        }
        }

    stage('Maven install') {
    steps{
        script {
                    FAILED_STAGE=env.STAGE_NAME
                    echo "Maven Package"
                }
     
    sh label: 'Testing', script: 'mvn install'
    
    
    }
    }
 
}
}
}
